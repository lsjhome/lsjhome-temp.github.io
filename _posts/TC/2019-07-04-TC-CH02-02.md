---
layout: post
title: Chapter 02-01. 상수와 데이터 출력(C프로그램의 기본 형태와 데이터 출력 방법)
comments: true
categories: [This is C]
tags: [C]
author: lsjhome

---

# Chapter 02 상수와 데이터 표현 방법

## 2.2 상수와 데이터 표현 방법

값이 변하지 않는 데이터를 상수(Constant)라고 한다.

### 2.2.1 정수 상수 표현법

정수는 10진수, 8진수, 16진수로 쓸 수 있다.

### 2.2.2 실수 상수 표현법

### 2.2.3 문자와 문자열 상수 표현법

- 문자 상수: 'A'
- 문자열 상수: "A"

### 2.2.4 상수가 컴파일된 후의 비트 형태

소스코드는 편집기에서 입력한 문자들이 모두 아스키 코드값으로 저장된다. 가령 10+20;과 같은 문장은 '1', '0', '+', '0', ';'ahen gkskdml answkfhtj wjwkdehlsek.

소스코드가 CPU에 의해 실행될 수 없는 이유도 +는 덧셈을 하라 라는 명령이 아니라 단지 문자일 뿐이며 10과 20도 연산이 가능한 값이 아니기 때문이다.

따라서 컴파일러는 컴파일 할때 연산자를 명령어로 바꾸고 상수들은 연산이 가능한 형태로 바꾸는데 이때 상수의 종류에 따라 각각 다른 형태로 바꾼다.

상수의 번역 형태

| 상수 종류 | 크기(byte) | 바뀌는 형태                |
| --------- | ---------- | -------------------------- |
| 정수      | 4          | 2진수                      |
| 실수      | 8          | IEEE 754 표준 double 형    |
| 문자      | 4          | 아스키 코드값과 같은 2진수 |

'A'는 아스키 코드값이 65이므로 정수형 상수 65와 같은 형태로 번역된다.

- 65: 00000000 00000000 00000000 01000001
- 'A': 00000000 00000000 00000000 01000001

결국 문자 상수는 소스코드에서 문자임을 표현하는 방법이며 컴퓨터 안에서는 정수와 같은 방식으로 처리된다. 

### 2.2.5 정수형 상수가 컴파일된 후의 비트 형태

- 정수는 컴파일되면 4비이트 크기의 2진수로 변환된다.
  - 10w진수정수 13이 컴파일되면 아래와 같다.
    - 0000 0000 0000 0000 0000 0000 0000 1101<br>
      MSB 여기부터 나머지 비트는 0으로 채운다 LSB

정수는 10진수를 그대로 2진수로 바꾼 것이므로 1값을 갖는 비트가 왼쪽에 위치할수록 크기가 커지고 이를 MSB(Most Significant Bit)라 칭한다. 반대로 오른쪽에 위치한 비트는 LSB(Least Significant Bit)라 부른다.

8비트로 정수를 표현할 때 최솟값은 0이고 최댓값은 $2^{8} - 1$ 인 255이다.

- 0 ~ $2^{비트수} -1 $

4바이트로 표현할 수 있는 정수의 최댓값은 $2^{32} - 1$ 로 4294967295가 된다. 따라서 4294967295보다 큰 상수를 사용하면 컴파일러는 자동으로 데이터를 8바이트로 늘려 처리한다. 만약 값의 크기와 상관없이 데이터의 크기르 8바이트로 만들고 싶을땐  정수에 접미사 LL(혹은 소문자 ll)을 붙여 사용한다.

```c
13; // 4바이트 크기로 처리
13LL; // 8바이트 크기로 처리
```

- 음수는 절대값을 2의 보수로 바꾸어 처리한다.
  - 절대값 13의 2진수&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 00000000 00000000 00000000 00001101
  - 0과 1을 바꿈(1의 보수): 11111111 11111111 11111111 11110010
  - 1의 보수에 1을 더함&nbsp; &nbsp; : 11111111 11111111 11111111 11110011

### 2.2.6 실수형 상수가 컴파일된 후의 비트 형태

2진수로 값을 표현하는 방식은 값의 크기에 비례하여 데이터의 크기도 커지므로 아주 큰 값이나 소수점 이하를 표현하는 데 한계가 있다. 따라서 실수는 데이터를 표현하는 효과적인 방법을 만들고 그 규칙에 따라 표현한다.

**실수는 제한된 크기에 효율적으로 수를 표현하기 위해 IEEE 754표준을 따른다.**

이 표준에는 single, double, quad 세 가지 형식이 있는데, 그 중에서 double 형식에 관해 알아보자. double 형식은 실수를 8바이트(64비트)로 표현하며 다음 규칙을 따른다.

- 첫째, 가장 왼쪽의 비트는 부호비트이며 양수는0, 음수는 1로 표기하낟.
- 둘째, 부호비트 다음부터 11비트는 지수값을 의미한다.
- 셋째, 나머지 52비트는 소수값을 의미한다.

표현할 수 있는 값의 범위는 $-1.79 * 10^{308}$ ~ $1.79 * 10^{308}$ 이다. 하지만 정확한 값을 표현하는데 한계가 있다. 가령 다음과 같이 유효숫자가 많은 값은 정확히 표현하지 못하고 오차가 발생한다.

- 0.1234567890123456789

오차가 발생하는 이유는 소수 부분을 나타내는 비트가 정확한 값을 표현할 수 없기 때문이다. 가령 소수 부분을 4비트로 표현할 때 각 비트가 나타내는 10진수 값은 다음과 같다.

- 부호 비트
- 지수부: 11비트
- 소수부: $2^{-1} (0.5)$  $2^{-2} (0.25)$ $2^{-3} (0.125)$ $2^{-4} (0.0625)$

이 소수 부분의 값들을 모두 조합해도 10진수로 소수점 이하 첫 째짜리까지만 정확하게 표현 가능하다.





